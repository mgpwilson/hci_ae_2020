(this.webpackJsonphci_ae_2020=this.webpackJsonphci_ae_2020||[]).push([[0],{207:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a(0),o=a.n(i),s=a(10),c=a.n(s),r=a(23),l=a(230),d=a(231),h=a(232),j=a(210),b=a(233),u=a(211),p=a(242),x=a(243),m=a(235),g=a(185),O=a.n(g),v=a(186),f=a.n(v),y=a(223),w=a(49),C=a(64),S=a(226),N=a(240),k=a(227),B=a(236),D=a(239),R=a(244),T=Object(y.a)((function(e){return{leftPadding:{paddingLeft:e.spacing(1)}}})),I=function(e){var t=T(),a=e.infoString;return Object(n.jsx)(D.a,{placement:"right",title:a,children:Object(n.jsx)(R.a,{color:"action",className:t.leftPadding})})},A=Object(y.a)({checkboxLabel:{display:"flex",alignItems:"center"}}),M=function(e){var t=e.baseContactRate,a=e.pandemic,o=e.setContactRate,s=A(),c={closeEducation:.76,reducedPublicTransport:.9,avoidGroups:.76,travelQuarantine:.95,workFromHome:.75,contactTracing:.8,handWashing:.95,masks:.8,outdoorSocialising:.8,socialDistancing:.8,closeIndoorDining:.8},l=Object(i.useState)({closeEducation:!1,reducedPublicTransport:!1,avoidGroups:!1,travelQuarantine:!1,workFromHome:!1,contractTracing:!1,handWashing:!1,masks:!1,outdoorSocialising:!1,socialDistancing:!1,closeIndoorDining:!1}),d=Object(r.a)(l,2),h=d[0],b=d[1],u=function(e){b((function(t){return Object(C.a)(Object(C.a)({},t),{},Object(w.a)({},e,!t[e]))}))};return Object(i.useEffect)((function(){for(var e=t,n=0,i=Object.entries(c);n<i.length;n++){var s=Object(r.a)(i[n],2),l=s[0],d=s[1];e=h[l]?e*d:e}a.setContactRate(e),o(e)}),[h]),Object(n.jsxs)(S.a,{children:[Object(n.jsx)(N.a,{component:"legend",children:"Infection Risk"}),Object(n.jsx)(k.a,{control:Object(n.jsx)(B.a,{}),label:Object(n.jsxs)("div",{className:s.checkboxLabel,children:[Object(n.jsx)(j.a,{variant:"body2",children:"Hand Washing"})," ",Object(n.jsx)(I,{infoString:"Everyone washes their hands regularly."})]}),onChange:function(){u("handWashing")}}),Object(n.jsx)(k.a,{control:Object(n.jsx)(B.a,{}),label:Object(n.jsxs)("div",{className:s.checkboxLabel,children:[Object(n.jsx)(j.a,{variant:"body2",children:"Social Distancing"})," ",Object(n.jsx)(I,{infoString:"Everyone maintains 2 metre social distancing."})]}),onChange:function(){u("socialDistancing")}}),Object(n.jsx)(k.a,{control:Object(n.jsx)(B.a,{}),label:Object(n.jsxs)("div",{className:s.checkboxLabel,children:[Object(n.jsx)(j.a,{variant:"body2",children:"Masks"})," ",Object(n.jsx)(I,{infoString:"Everyone wears a mask and wears it correctly."})]}),onChange:function(){u("masks")}}),Object(n.jsx)(k.a,{control:Object(n.jsx)(B.a,{}),label:Object(n.jsxs)("div",{className:s.checkboxLabel,children:[Object(n.jsx)(j.a,{variant:"body2",children:"Close Indoor Dining"})," ",Object(n.jsx)(I,{infoString:"Close restaurants and other indoor dining where customers must take off their masks in an enclosed space."})]}),onChange:function(){u("closeIndoorDining")}}),Object(n.jsx)(N.a,{component:"legend",children:"Frequency of Exposure"}),Object(n.jsx)(k.a,{control:Object(n.jsx)(B.a,{}),label:Object(n.jsxs)("div",{className:s.checkboxLabel,children:[Object(n.jsx)(j.a,{variant:"body2",children:"Close Education"})," ",Object(n.jsx)(I,{infoString:"All primary and secondary education is closed."})]}),onChange:function(){u("closeEducation")}}),Object(n.jsx)(k.a,{control:Object(n.jsx)(B.a,{}),label:Object(n.jsxs)("div",{className:s.checkboxLabel,children:[Object(n.jsx)(j.a,{variant:"body2",children:"Reduced Public Transport"})," ",Object(n.jsx)(I,{infoString:"Public trasport capacity is restricted."})]}),onChange:function(){u("reducedPublicTransport")}}),Object(n.jsx)(k.a,{control:Object(n.jsx)(B.a,{}),label:Object(n.jsxs)("div",{className:s.checkboxLabel,children:[Object(n.jsx)(j.a,{variant:"body2",children:"Outdoors Only Socialising"})," ",Object(n.jsx)(I,{infoString:"Socialising between people is restricted to being outdoors only."})]}),onChange:function(){u("outdoorSocialising")}}),Object(n.jsx)(k.a,{control:Object(n.jsx)(B.a,{}),label:Object(n.jsxs)("div",{className:s.checkboxLabel,children:[Object(n.jsx)(j.a,{variant:"body2",children:"Avoid Groups"})," ",Object(n.jsx)(I,{infoString:"Avoid groups larger than 6 people and contact between households."})]}),onChange:function(){u("avoidGroups")}}),Object(n.jsx)(k.a,{control:Object(n.jsx)(B.a,{}),label:Object(n.jsxs)("div",{className:s.checkboxLabel,children:[Object(n.jsx)(j.a,{variant:"body2",children:"Travel Quarantine"})," ",Object(n.jsx)(I,{infoString:"Quarantine all travelers arriving from outside the country."})]}),onChange:function(){u("travelQuarantine")}}),Object(n.jsx)(k.a,{control:Object(n.jsx)(B.a,{}),label:Object(n.jsxs)("div",{className:s.checkboxLabel,children:[Object(n.jsx)(j.a,{variant:"body2",children:"Work From Home"})," ",Object(n.jsx)(I,{infoString:"Everyone who can work from home, works from home."})]}),onChange:function(){u("workFromHome")}}),Object(n.jsx)(k.a,{control:Object(n.jsx)(B.a,{}),label:Object(n.jsxs)("div",{className:s.checkboxLabel,children:[Object(n.jsx)(j.a,{variant:"body2",children:"Contact Tracing"})," ",Object(n.jsx)(I,{infoString:"Contact tracing for all known cases (untested cases will not be traced)."})]}),onChange:function(){u("contactTracing")}})]})},L=a(229),F=a(241),H=function(e){var t,a=e.sir,i=e.days;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(j.a,{variant:"body2",children:"Under these measures:"}),Object(n.jsxs)(L.a,{children:[Object(n.jsx)(F.a,{children:Object(n.jsx)(j.a,{children:(t=a.getTotalHospitalCapacityOverFlow(),t>=0?"SUCCESS! The NHS will be able to treat everyone who needs treatment":"WARNING! Under the measures you have chosen, the NHS will have to turn away "+Math.abs(Math.round(t))+" sick and dying people.")})}),Object(n.jsx)(F.a,{children:Object(n.jsx)(j.a,{children:function(e){return e>=0?"SUCCESS! Everyone who needs a ventilator will be able to use one":"WARNING! Under the measures you have chosen, "+Math.abs(Math.round(e))+" people who need ventilators to breathe will be unable to use one. This may result in death."}(a.getTotalVentilatorCapacityOverFlow())})}),Object(n.jsx)(F.a,{children:Object(n.jsxs)(j.a,{children:[function(e){return(100*(a.getRecoveredAtDay(e)/a.population)).toPrecision(3)}(i),"% of Scotland would be infected in the first"," ",i," days."]})}),Object(n.jsx)(F.a,{children:Object(n.jsxs)(j.a,{children:[function(e){return(100*(a.getDeathsAtDay(e)/10/a.population)).toPrecision(3)}(i),"% people would die in the first ",i," days."]})})]})]})},W=a(15),E=a(54),P=a.n(E),G=function(e){var t=e.pandemic,a=e.days,i=5463e3,o=new Array(a).fill(274040),s=[{name:"Susceptible",data:t.map((function(e){return Math.round(e[0]*i)})).slice(0,a)},{name:"Infected",data:t.map((function(e){return Math.round(e[1]*i)})).slice(0,a)},{name:"Recovered",data:t.map((function(e){return Math.round(e[2]*i)})).slice(0,a)},{name:"Deaths",data:t.map((function(e){return Math.round(e[3]*i*.1)})).slice(0,a)},{name:"NHS Scotland Max Capacity (Infections/Day)",data:o}],c={chart:{type:"line",zoom:{enabled:!1},toolbar:{show:!1},animations:{easing:"easeout"}},colors:[W.a.blue[400],W.a.red[400],W.a.green[400],W.a.grey[900],W.a.purple[400]],stroke:{width:[4,4,4,4,2],dashArray:[0,0,0,0,8]},dataLabels:{enabled:!1},xaxis:{type:"numeric",labels:{show:!0,align:"right",minWidth:0,maxWidth:160,style:{colors:[],fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-yaxis-label"},offsetX:0,offsetY:0,rotate:0,formatter:function(e){return"day "+Math.round(e)}}},yaxis:{max:55e5,labels:{show:!0,align:"right",minWidth:0,maxWidth:160,style:{colors:[],fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-yaxis-label"},offsetX:0,offsetY:0,rotate:0,formatter:function(e){return e.toPrecision(2)/1e6+" million"}}},tooltip:{fixed:{enabled:!0,position:"topRight",offsetX:350,offsetY:50}}},r=(window.innerHeight-128)/2-20,l=3.5*window.innerWidth/12;return Object(n.jsx)(P.a,{options:c,series:s,type:"line",height:r,width:l})},z=a(182),V=a(183),Y=a(184),_=a.n(Y),U=function(e){return Object.assign({},e)},Q=function(){function e(t){var a=this;Object(z.a)(this,e),this.derive=function(e,t,n){e[0]=-a.contactRate*t[0]*t[1],e[1]=a.contactRate*t[0]*t[1]-a.recoveryRate*t[1]-a.deathRate*t[1],e[2]=a.recoveryRate*t[1],e[3]=a.deathRate*t[1]},this.initialInfected=.009,this.initialRecovered=0,this.initialDead=0,this.recoveryRate=1/14,this.contactRate=t,this.deathRate=.04,this.max_days=120,this.population=5463e3,this.bedCapacity=20553,this.ventilatorCapacity=585,this.hospitalizationRate=.075,this.ventilationRate=.028}return Object(V.a)(e,[{key:"setContactRate",value:function(e){this.contactRate=e}},{key:"getSusceptibleAtDay",value:function(e){return Math.round(this.simulation[e][0]*this.population)}},{key:"getInfectedAtDay",value:function(e){return Math.round(this.simulation[e][1]*this.population)}},{key:"getRecoveredAtDay",value:function(e){return Math.round(this.simulation[e][2]*this.population)}},{key:"getDeathsAtDay",value:function(e){return Math.round(this.simulation[e][3]*this.population)}},{key:"getBedCapacityMinusCasesAtDay",value:function(e){return this.bedCapacity-this.getInfectedAtDay(e)*this.hospitalizationRate}},{key:"getTotalHospitalCapacityOverFlow",value:function(){for(var e=0,t=0;t<=this.max_days;t++)e+=this.getBedCapacityMinusCasesAtDay(t);return e}},{key:"getVentilatorCapacityMinusCasesAtDay",value:function(e){var t=this.getInfectedAtDay(e)*this.hospitalizationRate;return this.ventilatorCapacity-t*this.ventilationRate}},{key:"getTotalVentilatorCapacityOverFlow",value:function(){for(var e=0,t=0;t<=this.max_days;t++)e+=this.getVentilatorCapacityMinusCasesAtDay(t);return e}},{key:"simulation",get:function(){var e=[1-this.initialInfected-this.initialRecovered,this.initialInfected,this.initialRecovered,this.initialDead],t=_()(e,this.derive,0,1),a=0,n=e,i=[];for(i.push(U(n));!((a+=1)>this.max_days);)t=t.step(),i.push(U(t.y));return i}}]),e}(),X=function(e){var t=e.pandemic1,a=e.pandemic2,i=e.days,o=(e.chartTitle,[{name:"Infections",data:[t.getRecoveredAtDay(i),a.getRecoveredAtDay(i)]},{name:"Dead",data:[t.getDeathsAtDay(i)/10,a.getDeathsAtDay(i)/10]}]),s={chart:{toolbar:{show:!1},animations:{easing:"easeout"}},plotOptions:{bar:{horizontal:!0}},xaxis:{categories:["Model 1","Model 2"],style:{fontFamily:"Roboto",fontWeight:"normal"},min:0,forceNiceScale:!0,labels:{show:!0,align:"right",minWidth:0,maxWidth:160,style:{colors:[],fontSize:"12px",fontFamily:"Helvetica, Arial, sans-serif",fontWeight:400,cssClass:"apexcharts-yaxis-label"},offsetX:0,offsetY:0,rotate:0,formatter:function(e){return(e/1e6).toPrecision(2)+"million"}}},yaxis:{min:0},colors:[W.a.red[400],W.a.grey[900]],tooltip:{x:{show:!0},y:{show:!0,formatter:function(e){return(e/1e6).toPrecision(3)+"million"}}}};return Object(n.jsx)(P.a,{options:s,series:o,type:"bar",height:window.innerHeight/2,width:window.innerWidth/3-80})},J=Object(y.a)((function(e){return{content:{height:"calc(100vh - 48px)",width:"calc(100vw - (100vw - 100%))",overflowX:"hidden",overflowY:"hidden"},centerTitle:{display:"grid",placeItems:"center"},title:{display:"flex"},sideBar:{height:"100%",padding:e.spacing(1)},sideBarBoxOuter:{height:"calc(50% - ".concat(e.spacing(2),"px)"),padding:e.spacing(1)},sideBarBoxInner:{height:"calc(100% - ".concat(e.spacing(2),"px - 20px)"),padding:e.spacing(2),overflowY:"scroll"},graphsContainer:{height:"calc(100vh - 48px - ".concat(e.spacing(4),"px)"),padding:e.spacing(1)},graphsBoxOuter:{height:"100%",width:"100%",padding:e.spacing(1),marginTop:"2em",flexDirection:"column",justifyContent:"center",alignItems:"center"},sliderContainer:{paddingLeft:"70px",paddingRight:"20px",paddingBottom:"10px",width:"100%"},slider:{paddingTop:"20px"},barChart:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%"},lineGraph:{paddingTop:"0px"},popover:{pointerEvents:"none"}}})),q=function(e){var t=J(),a=o.a.useState(null),i=Object(r.a)(a,2),s=i[0],c=i[1],l=function(){c(null)},d=Boolean(s),h=e.hoverContents,b=e.popoverContents;return Object(n.jsxs)("div",{children:[Object(n.jsx)(j.a,{"aria-owns":d?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:function(e){c(e.currentTarget)},onMouseLeave:l,variant:"body1",children:h}),Object(n.jsx)(x.a,{id:"mouse-over-popover",className:t.popover,classes:{paper:t.paper},open:d,anchorEl:s,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},width:"75%",onClose:l,disableRestoreFocus:!0,PaperProps:{style:{width:"50%"}},children:Object(n.jsx)(u.a,{p:2,elevation:3,className:t.popoverBox,children:Object(n.jsx)(m.a,{p:2,className:t.popoverBox,children:b})})})]})},K=function(){return Object(n.jsx)(q,{hoverContents:Object(n.jsxs)(j.a,{variant:"body2",children:["Learn more about pandemic management by thinking like a leader"," ",Object(n.jsx)(O.a,{color:"action",style:{marginBottom:"-0.2em",paddingBottom:"-0.2em"}})]}),popoverContents:Object(n.jsxs)("div",{children:[Object(n.jsxs)(j.a,{variant:"h5",children:[Object(n.jsx)(f.a,{style:{marginBottom:"-0.1em",paddingBottom:"-0.1em"}})," ","From: Nicola Sturgeon"]}),Object(n.jsx)(j.a,{variant:"subtitle1",gutterBottom:!0,children:"Nicola Sturgeon needs your help!"}),Object(n.jsx)(j.a,{variant:"body1",gutterBottom:!0,children:"The Scottish Parliament is entrusting you to pick Scotland's COVID policies for the next 120 days."}),Object(n.jsx)(j.a,{variant:"body2",gutterBottom:!0,children:"Use the simulation settings tool on the far left to pick from the available policies and compare their effectiveness. Your MPs will use the Game Feedback sections to message you feedback on your choices."}),Object(n.jsx)(j.a,{variant:"body2",gutterBottom:!0,children:"Keep Scotland safe!"}),Object(n.jsx)(j.a,{variant:"h5",gutterBottom:!0,style:{marginTop:"1em"},children:"Your Goal:"}),Object(n.jsx)(j.a,{variant:"subtitle1",gutterBottom:!0,children:"Your goal is to protect NHS Scotland until a vaccine is released."}),Object(n.jsx)(j.a,{variant:"body1",gutterBottom:!0,children:"If daily infections outpace NHS Scotland's maximum capacity hospitals will start running out of beds and ventilators."}),Object(n.jsx)(j.a,{variant:"body2",gutterBottom:!0,children:"Hint: The aim of this simulation is to 'flatten the curve'. Choose stronger measures to avoid unnecessary deaths."}),Object(n.jsx)(j.a,{variant:"body2",gutterBottom:!0,children:Object(n.jsx)("em",{children:"(The NHS Scotland maximum capacity is indicated on the graphs by a dashed purple line.)"})})]})})},Z=function(){var e=J(),t=Object(i.useState)(41),a=Object(r.a)(t,2),o=a[0],s=a[1],c=.5,x=Object(i.useState)(c),m=Object(r.a)(x,2),g=m[0],O=m[1],v=new Q(g),f=Object(i.useState)(c),y=Object(r.a)(f,2),w=y[0],C=y[1],S=new Q(w);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(l.a,{}),Object(n.jsx)(d.a,{elevation:0,position:"static",children:Object(n.jsx)(h.a,{variant:"dense",children:Object(n.jsx)(j.a,{component:"h1",variant:"h6",style:{flexGrow:1},align:"center",children:"COVIDUALISE: A Visualisation Tool For COVID-19 Infection Rates in Scotland"})})}),Object(n.jsxs)(b.a,{container:!0,component:"main",className:e.content,children:[Object(n.jsxs)(b.a,{item:!0,xs:2,className:e.sideBar,children:[Object(n.jsxs)("div",{className:e.centerTitle,children:[Object(n.jsx)(j.a,{component:"h2",variant:"subtitle1",children:Object(n.jsx)("b",{children:"Step 1: Settings"})}),Object(n.jsx)(j.a,{component:"h6",variant:"body2",children:"Change the behaviour of two populations"})]}),Object(n.jsxs)("div",{className:e.sideBarBoxOuter,children:[Object(n.jsx)(j.a,{align:"center",component:"h2",variant:"subtitle2",children:"Model 1"}),Object(n.jsx)(u.a,{variant:"outlined",className:e.sideBarBoxInner,children:Object(n.jsx)(M,{baseContactRate:c,pandemic:v,setContactRate:O})})]}),Object(n.jsxs)("div",{className:e.sideBarBoxOuter,children:[Object(n.jsx)(j.a,{align:"center",component:"h2",variant:"subtitle2",children:"Model 2"}),Object(n.jsx)(u.a,{variant:"outlined",className:e.sideBarBoxInner,children:Object(n.jsx)(M,{baseContactRate:c,pandemic:S,setContactRate:C})})]})]}),Object(n.jsxs)(b.a,{item:!0,xs:7,className:e.graphsContainer,children:[Object(n.jsxs)("div",{className:e.centerTitle,children:[Object(n.jsx)(j.a,{component:"h2",variant:"subtitle1",children:Object(n.jsx)("b",{children:"Step 2: Compare Pandemic Growth"})}),Object(n.jsx)(j.a,{component:"h6",variant:"body2",children:"The visualisations below show how an identical pandemic spreads differently depending on the behaviour of the two populations"})]}),Object(n.jsxs)(b.a,{container:!0,children:[Object(n.jsxs)(b.a,{item:!0,xs:6,className:e.graphsBoxOuter,children:[Object(n.jsx)(G,{pandemic:v.simulation,days:o,className:e.lineGraph}),Object(n.jsx)(G,{pandemic:S.simulation,days:o})]}),Object(n.jsxs)(b.a,{item:!0,xs:6,className:e.barChart,children:[Object(n.jsxs)("div",{className:e.sliderContainer,children:[Object(n.jsx)(j.a,{id:"discrete-slider-always",gutterBottom:!0,children:"Adjust Simulation Length"}),Object(n.jsx)(p.a,{onChangeCommitted:function(e,t){return s(t)},defaultValue:41,getAriaValueText:function(e){return"".concat(e," days")},"aria-labelledby":"discrete-slider-custom",min:20,max:120,marks:[{value:30,label:"30 days"},{value:60,label:"60 days"},{value:90,label:"90 days"},{value:120,label:"120 days"}],valueLabelDisplay:"auto",className:e.slider})]}),Object(n.jsxs)(j.a,{className:e.centerTitle,style:{marginLeft:"1.5em",marginTop:"1.5em"},children:["Totals at Day ",o]}),Object(n.jsx)(X,{pandemic1:v,pandemic2:S,days:o,name:"Total people"})]})]})]}),Object(n.jsxs)(b.a,{item:!0,xs:3,className:e.sideBar,children:[Object(n.jsxs)("div",{className:e.centerTitle,children:[Object(n.jsx)(j.a,{component:"h2",variant:"subtitle1",children:Object(n.jsx)("b",{children:"Step 3: Context & Policy"})}),Object(n.jsx)(j.a,{component:"body1",children:Object(n.jsx)(K,{})})]}),Object(n.jsxs)("div",{className:e.sideBarBoxOuter,children:[Object(n.jsx)(j.a,{align:"center",component:"h2",variant:"subtitle2",children:"Model 1"}),Object(n.jsx)(u.a,{variant:"outlined",className:e.sideBarBoxInner,children:Object(n.jsx)(H,{sir:v,days:o})})]}),Object(n.jsxs)("div",{className:e.sideBarBoxOuter,children:[Object(n.jsx)(j.a,{align:"center",component:"h2",variant:"subtitle2",children:"Model 2"}),Object(n.jsx)(u.a,{variant:"outlined",className:e.sideBarBoxInner,children:Object(n.jsx)(H,{sir:S,days:o})})]})]})]})]})};c.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(Z,{})}),document.getElementById("root"))}},[[207,1,2]]]);
//# sourceMappingURL=main.2cc143af.chunk.js.map